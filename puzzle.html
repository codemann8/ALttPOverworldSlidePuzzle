<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Overworld Slide Puzzle</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="puzzle.css" />
</head>
<body>
  <div class="toolbar">
    <div class="toolbar-left">
      <button id="resetBtn" class="btn">Reset</button>
      <button id="shuffleBtn" class="btn">Shuffle</button>
      <button id="challengeBtn" class="btn">New Challenge</button>
      <button id="giveUpBtn" class="btn" style="display: none;">Give Up</button>
    </div>
    <div class="toolbar-right">
      <button id="helpBtn" class="btn btn-icon" aria-label="Help" title="Show controls">?</button>
      <button id="themeToggleBtn" class="btn btn-icon" aria-label="Toggle dark mode" title="Toggle dark mode">üí°</button>
    </div>
  </div>
  <div class="game-container">
    <div id="board" tabindex="0" aria-label="Slide puzzle board"></div>
    <div class="challenge-info" id="challengeInfo" style="display: none;">
      <div class="challenge-info-title">Challenge</div>
      <div class="challenge-info-row">Seed: <span id="challengeSeedDisplay"></span></div>
      <div class="challenge-info-row">Shuffling steps: <span id="challengeStepsDisplay"></span></div>
      <div class="challenge-stats-container">
        <div class="challenge-stat-group">
          <div class="challenge-stat-label">Move Count</div>
          <div id="challengeMovesDisplay" class="challenge-stat-value">0</div>
        </div>
        <div class="challenge-stat-group">
          <div class="challenge-stat-label">Timer</div>
          <div class="challenge-timer-row">
            <div id="challengeTimerDisplay" class="challenge-stat-value">0:00</div>
            <button id="timerToggleBtn" class="btn-timer-toggle" aria-label="Pause timer" title="Pause">‚è∏</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Help Dialog -->
  <div id="helpDialog" class="dialog-overlay" style="display: none;">
    <div class="dialog">
      <h2>Controls</h2>
      <div class="dialog-content">
        <div class="help-section">
          <h3>Keyboard</h3>
          <p><span class="kbd">Space</span> Switch selected gap</p>
          <p><span class="kbd">‚Üê</span><span class="kbd">‚Üí</span><span class="kbd">‚Üë</span><span class="kbd">‚Üì</span> or <span class="kbd">W</span><span class="kbd">A</span><span class="kbd">S</span><span class="kbd">D</span> Slide a piece into the selected gap</p>
        </div>
        <div class="help-section">
          <h3>Mouse Click</h3>
          <p>Click a piece to move it into an adjacent gap</p>
          <p>Click a gap to select it</p>
        </div>
        <div class="help-section">
          <h3>Mouse Swipe</h3>
          <p>Swipe a piece or gap to move in that direction</p>
        </div>
        <div class="help-section">
          <h3>Mouse Drag</h3>
          <p>Drag a piece over gaps or drag a gap over pieces to move continuously</p>
        </div>
        <div class="help-note">
          <p><strong>Note:</strong> Large 2√ó2 pieces move only if both gaps line up on their path. Adjacent gaps can be swapped.</p>
        </div>
      </div>
      <div class="dialog-buttons">
        <button id="helpCloseBtn" class="btn btn-primary">Got it</button>
      </div>
    </div>
  </div>

  <!-- Challenge Dialog -->
  <div id="challengeDialog" class="dialog-overlay" style="display: none;">
    <div class="dialog">
      <h2>New Challenge</h2>
      <div class="dialog-content">
        <div class="form-group">
          <label for="seedInput">Seed (leave empty for random):</label>
          <div class="seed-input-group">
            <input type="number" id="seedInput" placeholder="Enter a number" min="0" />
            <button type="button" id="dailyChallengeBtn" class="btn btn-primary">Daily Challenge</button>
          </div>
        </div>
        <div class="form-group">
          <label for="stepsInput">Number of shuffling steps (difficulty):</label>
          <input type="number" id="stepsInput" value="250" min="1" max="10000" />
          <div class="difficulty-presets">
            <button type="button" class="preset-btn" data-steps="50">Easy (50)</button>
            <button type="button" class="preset-btn" data-steps="250">Normal (250)</button>
            <button type="button" class="preset-btn" data-steps="1000">Hard (1000)</button>
            <button type="button" class="preset-btn" data-steps="10000">Very Hard (10000)</button>
          </div>
        </div>
      </div>
      <div class="dialog-buttons">
        <button id="challengeStartBtn" class="btn btn-primary">Start Challenge</button>
        <button id="challengeCancelBtn" class="btn">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Congratulations Dialog -->
  <div id="congratsDialog" class="dialog-overlay" style="display: none;">
    <div class="dialog">
      <h2>Congratulations!</h2>
      <div class="dialog-content">
        <p id="congratsMessage" style="text-align: center; font-size: 1.1rem; margin: 20px 0;"></p>
      </div>
      <div class="dialog-buttons">
        <button id="congratsOkBtn" class="btn btn-primary">OK</button>
      </div>
    </div>
  </div>

  <script src="puzzle.js"></script>
</body>
</html>